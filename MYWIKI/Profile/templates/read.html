{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <title>ë‚˜ì˜ìœ„í‚¤</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>

  <script type="text/javascript">
    $(document).ready(function () {
      // â• ë²„íŠ¼ í´ë¦­ì‹œ
      $("#addItemBtn").click(function () {
        // item ì˜ ìµœëŒ€ë²ˆí˜¸ êµ¬í•˜ê¸°
        var lastItemNo = $("#profile_tb tr:last")
          .attr("class")
          .replace("item", "");

        var newitem = $("#profile_tb tr:eq(1)").clone();
        newitem.removeClass();
        newitem.find("td:eq(0)").attr("rowspan", "1");
        newitem.addClass("item" + (parseInt(lastItemNo) + 1));

        $("#profile_tb").append(newitem);
      });
      // í•­ëª©ì¶”ê°€ ë²„íŠ¼ í´ë¦­ì‹œ

      $(".addBtn").live("click", function () {
        var clickedRow = $(this).parent().parent();
        var cls = clickedRow.attr("class");

        // tr ë³µì‚¬í•´ì„œ ë§ˆì§€ë§‰ì— ì¶”ê°€
        var newrow = clickedRow.clone();
        newrow.find("td:eq(0)").remove();
        newrow.insertAfter($("#profile_tb ." + cls + ":last"));

        // rowspan ì¡°ì •
        resizeRowspan(cls);
      });

      // ì‚­ì œë²„íŠ¼ í´ë¦­ì‹œ
      $(".delBtn").live("click", function () {
        var clickedRow = $(this).parent().parent();
        var cls = clickedRow.attr("class");

        // ê° í•­ëª©ì˜ ì²«ë²ˆì§¸ rowë¥¼ ì‚­ì œí•œ ê²½ìš° ë‹¤ìŒ rowì— td í•˜ë‚˜ë¥¼ ì¶”ê°€í•´ ì¤€ë‹¤.
        if (clickedRow.find("td:eq(0)").attr("rowspan")) {
          if (clickedRow.next().hasClass(cls)) {
            clickedRow
              .next()
              .prepend(clickedRow.find("td:eq(0)"));
          }
        }

        clickedRow.remove();

        // rowspan ì¡°ì •
        resizeRowspan(cls);
      });
      // cls : rowspan ì„ ì¡°ì •í•  class ex) item1, item2, ...
      function resizeRowspan(cls) {
        var rowspan = $("." + cls).length;
        $("." + cls + ":first td:eq(0)").attr("rowspan", rowspan);
      }
    });
  </script>
  <link rel="stylesheet" href="{% static 'css/base.css' %}" />
  <link rel="stylesheet" href="{% static 'css/photo.css' %}" />
  <link rel="stylesheet" href="{% static 'css/read.css' %}" />
</head>
<style>
  .navbar_logo {
    float: left;
  }
</style>

<body>
  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav class="navbar">
    <div>
      <a class="navbar_logo" href="{% url 'home' %}"><img src="{% static 'img/logo.png' %}"></a>
    </div>
    {% if user.is_authenticated %}
    <a href="{% url 'read' profile.id %}" class="navitem">ë‚´ í”„ë¡œí•„</a>
    <a href="" class="navitem">ê¸°ë¡ ë³´ê¸°</a>
    {% endif %}
    {% if user.is_authenticated %}
    <a href="{% url 'logout' %}">ë¡œê·¸ ì•„ì›ƒ</a>
    {% endif %}
    {% if not user.is_authenticated %}
    <a href="{% url 'login'%}">ë¡œê·¸ì¸</a>
    {% endif %}
  </nav>

  <script>
    const currentLocation = location.href;
    const navItem = document.querySelectorAll('.navitem');
    const navLength = navItem.length;
    for (let i = 0; i < navLength; i++) {
      if (navItem[i].href === currentLocation) {
        navItem[i].className = "navitem active"
      }
    }
  </script>


  <form action="">
    <!--í”ŒëŸ¬ìŠ¤ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ row í–‰ ì¶”ê°€ ë˜ì•¼-->
    {{profile.image}}
    <table id="profile_tb" border="1px">
      <tr>
        <th>subject</th>
        <th>content</th>
      </tr>
      <tr class="item1">
        <td>ì´ë¦„ ì…ë ¥ğŸ’­</td>
        <td>{{profile.name}}</td>
      </tr>
      </tr>
      <tr class="item2">
        <td>ìƒì¼ ì…ë ¥ğŸ‚</td>
        <td>{{profile.bdate}}</td>
      </tr>
      </tr>
      <tr class="item3">
        <td>ì¶œìƒì§€ğŸŒ
        </td>
        <td>>{{profile.bplace}}</td>
      </tr>
      <tr class="item4">
        <td>ì†Œì†ğŸ›
        </td>
        <td>{{profile.organ}}</td>
      </tr>
      <tr class="item5">
        <td>mbtiâ™¥ï¸
        </td>
        <td>{{profile.mbti}}</td>
      </tr>
      <tr class="item6">
        <td>ê°€ì¹˜ê´€ğŸ’­
        </td>
        <td>{{profile.message}}</td>
      </tr>
      <tr class="item7">
        <td>SNSğŸ“±
        </td>
        <td>{{profile.sns}}</td>
      </tr>
    </table>
  </form>
  <div class="bt_wrap">
    <button type="submit"
      style="border:0; width:120px; font-size: 18px; color: white; background-color: black; height: 43px;"><a
        href="{% url 'update' profile.id %}">ìˆ˜ì •í•˜ê¸°</a></button>
    <button type="submit" style="border:0; outline: none; margin: 10px"><a href="#"
        onclick="clip(); return false;">ê³µìœ í•˜ê¸°</a></button>
  </div>
  ë°©ëª…ë¡<br>
  {{profile.topic_content}}
  <script type="text/javascript">

    function clip() {

      var url = '';
      var textarea = document.createElement("textarea");
      document.body.appendChild(textarea);
      url = window.document.location.href;
      textarea.value = url;
      textarea.select();
      document.execCommand("copy");
      document.body.removeChild(textarea);
      alert("URLì´ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.")
    }

  </script>
</body>


</html>