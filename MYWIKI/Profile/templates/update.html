{% load static %} {% extends 'base.html' %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ë‚˜ì˜ìœ„í‚¤</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <script
            src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"
            type="text/javascript"
        ></script>

        <script type="text/javascript">
            $(document).ready(function () {
                // â• ë²„íŠ¼ í´ë¦­ì‹œ
                $("#addItemBtn").click(function () {
                    // item ì˜ ìµœëŒ€ë²ˆí˜¸ êµ¬í•˜ê¸°
                    var lastItemNo = $("#profile_tb tr:last")
                        .attr("class")
                        .replace("item", "");

                    var newitem = $("#profile_tb tr:eq(1)").clone();
                    newitem.removeClass();
                    newitem.find("td:eq(0)").attr("rowspan", "1");
                    newitem.addClass("item" + (parseInt(lastItemNo) + 1));

                    $("#profile_tb").append(newitem);
                });
                // í•­ëª©ì¶”ê°€ ë²„íŠ¼ í´ë¦­ì‹œ

                $(".addBtn").live("click", function () {
                    var clickedRow = $(this).parent().parent();
                    var cls = clickedRow.attr("class");

                    // tr ë³µì‚¬í•´ì„œ ë§ˆì§€ë§‰ì— ì¶”ê°€
                    var newrow = clickedRow.clone();
                    newrow.find("td:eq(0)").remove();
                    newrow.insertAfter($("#profile_tb ." + cls + ":last"));

                    // rowspan ì¡°ì •
                    resizeRowspan(cls);
                });

                // ì‚­ì œë²„íŠ¼ í´ë¦­ì‹œ
                $(".delBtn").live("click", function () {
                    var clickedRow = $(this).parent().parent();
                    var cls = clickedRow.attr("class");

                    // ê° í•­ëª©ì˜ ì²«ë²ˆì§¸ rowë¥¼ ì‚­ì œí•œ ê²½ìš° ë‹¤ìŒ rowì— td í•˜ë‚˜ë¥¼ ì¶”ê°€í•´ ì¤€ë‹¤.
                    if (clickedRow.find("td:eq(0)").attr("rowspan")) {
                        if (clickedRow.next().hasClass(cls)) {
                            clickedRow
                                .next()
                                .prepend(clickedRow.find("td:eq(0)"));
                        }
                    }

                    clickedRow.remove();

                    // rowspan ì¡°ì •
                    resizeRowspan(cls);
                });
                // cls : rowspan ì„ ì¡°ì •í•  class ex) item1, item2, ...
                function resizeRowspan(cls) {
                    var rowspan = $("." + cls).length;
                    $("." + cls + ":first td:eq(0)").attr("rowspan", rowspan);
                }
            });
        </script>
        <link rel="stylesheet" href="{% static 'css/base.css' %}" />
        <link rel="stylesheet" href="{% static 'css/photo.css' %}" />
        <link rel="stylesheet" href="{% static 'css/update.css' %}" />
    </head>

    <body>
        {% block nav %} {% include "base.html" %} {% end block %}{% include
        "photo.html" %}
        <form action="{url 'update' row.id}" id="form" onsubmit="">
            <!--í”ŒëŸ¬ìŠ¤ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ row í–‰ ì¶”ê°€ ë˜ì•¼-->
            <button id="addItemBtn">â•</button>
            <table id="profile_tb" border="1px">
                <tr>
                    <th>subject</th>
                    <th>content</th>
                    <th>â˜‘ï¸</th>
                    <th>âœ‚ï¸</th>
                </tr>
                <tr class="item1">
                    <td>
                        <button class="addBtn">â•</button>
                    </td>
                    <td><input type="text" /></td>
                    <td><input type="checkbox" /></td>
                    <td><button class="delBtn">ì‚­ì œ</button></td>
                </tr>
                <tr class="item2">
                    <td>
                        <input
                            type="text"
                            placeholder="ex) ìƒì¼ ì…ë ¥ğŸ‚"
                        /><button class="addBtn">â•</button>
                    </td>
                    <td><input type="text" /></td>
                    <td><input type="checkbox" /></td>
                    <td><button class="delBtn">ì‚­ì œ</button></td>
                </tr>
                <tr class="item3">
                    <td>
                        <input type="text" placeholder="ex) ì¶œìƒì§€ğŸŒ" /><button
                            class="addBtn"
                        >
                            â•
                        </button>
                    </td>
                    <td><input type="text" /></td>
                    <td><input type="checkbox" /></td>
                    <td><button class="delBtn">ì‚­ì œ</button></td>
                </tr>
            </table>
        </form>
        <button onclick="submitForm()">ì €ì¥</button>
        <script>
            function submitForm() {
                const form = document.getElementById("form");
                form.submit();
            }
            let btns = document.querySelectorAll("button");
            for (i in btns) {
                btns[i].setAttribute("type", "button");
                console.log(btns[i]);
            }
        </script>
    </body>
</html>
{% block footer %} {% include "mywiki/footer.html" %} {% endblock %}
